#include "word.h"
#include "lcd.h"
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>

unsigned char zero[21][16/8]={
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x00,0x77,0x00,0x63,0x80,
		0xE3,0x80,0xC1,0x80,0xC1,0x80,0xC1,0x80,0xC1,0x80,0xE3,0x80,0x63,0x00,0x77,0x00,
		0x3E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};
unsigned char one[21][8/8]={
		0x00,0x00,0x00,0x00,0x00,0x18,0x78,0xF8,0x18,0x18,0x18,0x18,0x18,0x18,0x18,0x18,
		0x18,0x00,0x00,0x00,0x00
	};
unsigned char two[21][16/8]={
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x00,0x67,0x00,0x03,0x00,
		0x03,0x00,0x03,0x00,0x07,0x00,0x0E,0x00,0x3C,0x00,0x70,0x00,0x60,0x00,0xC0,0x00,
		0xFF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};
		

unsigned char three[21][16/8]={
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x00,0x07,0x00,0x03,0x00,
		0x03,0x00,0x0E,0x00,0x7E,0x00,0x0F,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x07,0x00,
		0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};
unsigned char four[21][16/8]={
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x00,0x07,0x00,0x0F,0x00,
		0x1F,0x00,0x3F,0x00,0x37,0x00,0x67,0x00,0xE7,0x00,0xFF,0x80,0x07,0x00,0x07,0x00,
		0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};
unsigned char five[21][16/8]={
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0x00,0x70,0x00,0x70,0x00,
		0x60,0x00,0x60,0x00,0x7E,0x00,0x07,0x00,0x03,0x00,0x03,0x00,0x03,0x00,0x07,0x00,
		0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};
unsigned char six[21][16/8]={
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1F,0x00,0x38,0x00,0x70,0x00,
		0x60,0x00,0x60,0x00,0xFF,0x00,0xF7,0x80,0xE1,0x80,0xE1,0x80,0x61,0x80,0x77,0x00,
		0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};

unsigned char seven[21][16/8]={
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0x80,0x03,0x80,0x03,0x00,
		0x06,0x00,0x06,0x00,0x0C,0x00,0x0C,0x00,0x18,0x00,0x18,0x00,0x38,0x00,0x30,0x00,
		0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};
unsigned char eight[21][16/8]={
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x00,0x77,0x00,0x63,0x00,
		0x63,0x00,0x77,0x00,0x3E,0x00,0x77,0x00,0xE3,0x80,0xE1,0x80,0xE3,0x80,0x77,0x00,
		0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};
unsigned char nine[21][16/8]={
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x00,0x77,0x00,0xE3,0x00,
		0xC3,0x80,0xC3,0x80,0xE3,0x80,0x77,0x80,0x3F,0x80,0x03,0x00,0x03,0x00,0x0E,0x00,
		0x7C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00
	};
unsigned char neg[21][8/8]={
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x00,0x00,0x00,
		0x00,0x00,0x00,0x00,0x00	
	};

unsigned char mao[21][16/8]={
		0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
		0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00	
	};

int show_word(int x0,int y0,int w, int h, unsigned char word[][w/8], int color)
{
    int i, j, k;
    for (i = 0; i < h; i++)
    {
        for (j = 0; j < w / 8; j++)
        {
            // 解析 word[i][j] 的 8 个 bit 位：为 1 就显示颜色
            for (k = 7; k >= 0; k--)
            {
                // 添加括号明确运算顺序
                if ((word[i][j] & (1 << k)) == (1 << k))
                {
                    // 画点
                    display_point(j * 8 + (7 - k)+x0, i+y0, color);
                }
            }
        }
    }
    // 添加返回值
    return 0;
}
int show_number(int x0,int y0,int number, int color)
{	int x=x0;
	int num=number;
	while(num>0)
	
	{
		unsigned char (*show_num)[16/8];
		int num_l=num%10;
		switch(num_l){
			case 0 :show_num=zero;break;
			case 1 :show_num=(unsigned char (*)[16/8])one;break;
			case 2 :show_num=two;break;
			case 3 :show_num=three;break;
			case 4:show_num=four;break;
			case 5:show_num=five;break;
			case 6:show_num=six;break;
			case 7:show_num=seven;break;
			case 8:show_num=eight;break;
			case 9:show_num=nine;break;
			default: return -1;
			}
		int h=21,w;
		if (num_l==1)
		{
			w=8;
		}
		else w=16;
		show_word( x, y0,  w,  h, show_num , color);
		x-=16;
		num=num/10;
	}
}
int count_down(int x0,int y0,int year,int month, int day, int hour,int minute,int second,int color)

{
	int x=x0;
	show_number(x, y0, second,  color);
	x-=32;
	show_word(x, y0, 16, 21, mao, color);
	x-=16;
	show_number(x, y0, minute,  color);
	x-=32;
	show_word(x, y0, 16, 21, mao, color);
	x-=16;
	show_number(x, y0, hour,  color);
}


